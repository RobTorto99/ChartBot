{
    "visualization_prompt": "Generate a Sankey diagram showing energy flow relationships using node positioning and weighted edge encoding",
    "visualization_code": {
        "chart": {
            "type": "sankey",
            "backgroundColor": "#ffffff"
        },
        "title": {
            "text": "Estimated US Energy Consumption in 2017",
            "style": {
                "color": "#2a2a2a",
                "fontSize": "20px",
                "fontWeight": "bold"
            }
        },
        "subtitle": {
            "text": "Source: <a href='https://www.llnl.gov/'>Lawrence Livermore National Laboratory</a>",
            "useHTML": true
        },
        "plotOptions": {
            "sankey": {
                "borderWidth": 0,
                "nodePadding": 15
            }
        },
        "series": [
            {
                "name": "Energy Flow (quads)",
                "borderColor": "#1a1a1a",
                "borderWidth": 1,
                "dataLabels": {
                    "style": {
                        "color": "#1a1a1a",
                        "textOutline": "none"
                    }
                },
                "nodes": [
                    {
                        "id": "Electricity & Heat",
                        "offset": -110,
                        "color": "#7cb5ec"
                    },
                    {
                        "id": "Residential",
                        "column": 2,
                        "offset": 50,
                        "color": "#90ed7d"
                    },
                    {
                        "id": "Commercial",
                        "column": 2,
                        "offset": 50,
                        "color": "#f7a35c"
                    },
                    {
                        "id": "Industrial",
                        "column": 2,
                        "offset": 50,
                        "color": "#8085e9"
                    },
                    {
                        "id": "Transportation",
                        "column": 2,
                        "offset": 50,
                        "color": "#f15c80"
                    },
                    {
                        "id": "Rejected Energy",
                        "column": 3,
                        "offset": -30,
                        "color": "#e4d354"
                    },
                    {
                        "id": "Energy Services",
                        "column": 3,
                        "color": "#2b908f"
                    },
                    {
                        "id": "Solar",
                        "color": "#ffdf5f"
                    },
                    {
                        "id": "Nuclear",
                        "color": "#de578a"
                    },
                    {
                        "id": "Hydro",
                        "color": "#64e572"
                    },
                    {
                        "id": "Wind",
                        "color": "#7798BF"
                    },
                    {
                        "id": "Geothermal",
                        "color": "#aaeeee"
                    },
                    {
                        "id": "Natural Gas",
                        "color": "#f45b5b"
                    },
                    {
                        "id": "Biomass",
                        "color": "#8d4653"
                    },
                    {
                        "id": "Coal",
                        "color": "#7798BF"
                    },
                    {
                        "id": "Petroleum",
                        "offset": -1,
                        "color": "#7F7F7F"
                    }
                ],
                "data": [
                    [
                        "Solar",
                        "Electricity & Heat",
                        0.48
                    ],
                    [
                        "Nuclear",
                        "Electricity & Heat",
                        8.42
                    ],
                    [
                        "Hydro",
                        "Electricity & Heat",
                        2.75
                    ],
                    [
                        "Wind",
                        "Electricity & Heat",
                        2.35
                    ],
                    [
                        "Geothermal",
                        "Electricity & Heat",
                        0.15
                    ],
                    [
                        "Natural Gas",
                        "Electricity & Heat",
                        9.54
                    ],
                    [
                        "Coal",
                        "Electricity & Heat",
                        12.7
                    ],
                    [
                        "Biomass",
                        "Electricity & Heat",
                        0.52
                    ],
                    [
                        "Petroleum",
                        "Electricity & Heat",
                        0.21
                    ],
                    [
                        "Electricity & Heat",
                        "Residential",
                        4.7
                    ],
                    [
                        "Solar",
                        "Residential",
                        0.19
                    ],
                    [
                        "Geothermal",
                        "Residential",
                        0.04
                    ],
                    [
                        "Natural Gas",
                        "Residential",
                        4.58
                    ],
                    [
                        "Biomass",
                        "Residential",
                        0.33
                    ],
                    [
                        "Petroleum",
                        "Residential",
                        0.88
                    ],
                    [
                        "Electricity & Heat",
                        "Commercial",
                        4.6
                    ],
                    [
                        "Solar",
                        "Commercial",
                        0.08
                    ],
                    [
                        "Geothermal",
                        "Commercial",
                        0.02
                    ],
                    [
                        "Natural Gas",
                        "Commercial",
                        3.29
                    ],
                    [
                        "Coal",
                        "Commercial",
                        0.02
                    ],
                    [
                        "Biomass",
                        "Commercial",
                        0.16
                    ],
                    [
                        "Petroleum",
                        "Commercial",
                        0.83
                    ],
                    [
                        "Electricity & Heat",
                        "Industrial",
                        3.23
                    ],
                    [
                        "Solar",
                        "Industrial",
                        0.02
                    ],
                    [
                        "Hydro",
                        "Industrial",
                        0.01
                    ],
                    [
                        "Natural Gas",
                        "Industrial",
                        9.84
                    ],
                    [
                        "Coal",
                        "Industrial",
                        1.24
                    ],
                    [
                        "Biomass",
                        "Industrial",
                        2.48
                    ],
                    [
                        "Petroleum",
                        "Industrial",
                        8.38
                    ],
                    [
                        "Electricity & Heat",
                        "Transportation",
                        0.03
                    ],
                    [
                        "Natural Gas",
                        "Transportation",
                        0.76
                    ],
                    [
                        "Biomass",
                        "Transportation",
                        1.43
                    ],
                    [
                        "Petroleum",
                        "Transportation",
                        25.9
                    ],
                    [
                        "Electricity & Heat",
                        "Rejected Energy",
                        24.7
                    ],
                    [
                        "Residential",
                        "Rejected Energy",
                        3.75
                    ],
                    [
                        "Commercial",
                        "Rejected Energy",
                        3.15
                    ],
                    [
                        "Industrial",
                        "Rejected Energy",
                        12.9
                    ],
                    [
                        "Transportation",
                        "Rejected Energy",
                        22.2
                    ],
                    [
                        "Residential",
                        "Energy Services",
                        6.97
                    ],
                    [
                        "Commercial",
                        "Energy Services",
                        5.84
                    ],
                    [
                        "Industrial",
                        "Energy Services",
                        12.4
                    ],
                    [
                        "Transportation",
                        "Energy Services",
                        5.91
                    ]
                ]
            }
        ],
        "tooltip": {
            "headerFormat": null,
            "pointFormat": "{point.fromNode.name} \u2192 {point.toNode.name}: {point.weight:.2f} quads",
            "nodeFormat": "{point.name}: {point.sum:.2f} quads"
        }
    },
    "visualization_explanation": "The Sankey diagram structure contains 16 nodes and 42 directional flows representing energy transfers between production sources, conversion systems, and end-use sectors. Node colors maintain categorical consistency across energy types (blue for electricity, green for renewables, red for fossil fuels). Flow widths encode quantitative values in quadrillion BTU (quads), with petroleum transportation flows (25.9 quads) and electricity generation from coal (12.7 quads) as dominant paths. The LLNL-source data shows 40% average energy rejection rate (\u03bc=9.8 quads per sector, \u03c3=7.6), aligning with real-world energy system inefficiencies. The vertical layout optimizes Tufte's data-ink ratio by eliminating gridlines while using proportional width encoding. Cairo's principles are applied through: 1) Pre-attentive color coding 2) Flow magnitude discriminability 3) Clear source-sink left-to-right orientation. Node offsets (-110px for left-column sources) prevent label overlap while maintaining energy system hierarchy."
}