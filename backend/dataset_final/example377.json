{
    "visualization_prompt": "Create a Highcharts chartOptions object to render a stacked area chart with the title 'Music revenue race chart'. The chart should display revenue data from 1973 to 2021 for different music formats: LpEp, Vinyl, Cassette, CD, Downloads, and Streams. The chart should have styled axes and labels, custom colors for each series, and additional configurations such as chart margins, background, and legend. The chart should also include annotations for key points in the data.",
    "visualization_code": {
        "chart": {
            "events": {
                "load": "function () { const labels = this.annotations[0].labels; labels.find(a => a.options.id === 'vinyl-label').graphic.attr({ rotation: -20 }); labels.find(a => a.options.id === 'cassettes-label').graphic.attr({ rotation: 20 }); }"
            },
            "type": "area",
            "marginTop": 100,
            "animation": {
                "duration": 700,
                "easing": "t => t"
            }
        },
        "title": {
            "text": "Music revenue race chart"
        },
        "subtitle": {
            "text": "function () { return `<span style='font-size: 60px'>${input.value}</span>`; }",
            "floating": true,
            "align": "right",
            "verticalAlign": "middle",
            "x": -100,
            "y": -110
        },
        "data": {
            "csv": "document.getElementById('csv').innerHTML",
            "itemDelimiter": "\t",
            "complete": "function (options) { for (let i = 0; i < options.series.length; i++) { formatRevenue[i] = arrToAssociative(options.series[i].data); options.series[i].data = null; } }"
        },
        "xAxis": {
            "allowDecimals": false,
            "min": 1973,
            "max": 2021
        },
        "yAxis": {
            "reversedStacks": false,
            "title": {
                "text": "Revenue in the U.S."
            },
            "labels": {
                "format": "${text} B"
            }
        },
        "tooltip": {
            "split": true,
            "headerFormat": "<span style=\"font-size: 1.2em\">{point.x}</span>",
            "pointFormat": "{series.name}: <b>${point.y:,.1f} B</b> ({point.percentage:.1f}%)",
            "crosshairs": true
        },
        "plotOptions": {
            "area": {
                "stacking": "normal",
                "pointStart": 1973,
                "marker": {
                    "enabled": false
                }
            }
        },
        "annotations": [
            {
                "labelOptions": {
                    "borderWidth": 0,
                    "backgroundColor": "undefined",
                    "verticalAlign": "middle",
                    "allowOverlap": true,
                    "style": {
                        "pointerEvents": "none",
                        "opacity": 0,
                        "transition": "opacity 500ms"
                    }
                },
                "labels": [
                    {
                        "text": "Vinyl",
                        "verticalAlign": "top",
                        "point": {
                            "x": 1975,
                            "xAxis": 0,
                            "y": 1.45,
                            "yAxis": 0
                        },
                        "style": {
                            "fontSize": "0.8em",
                            "color": "#000"
                        },
                        "id": "vinyl-label"
                    },
                    {
                        "text": "LP-EP",
                        "point": {
                            "x": 1980,
                            "xAxis": 0,
                            "y": 0.2,
                            "yAxis": 0
                        },
                        "style": {
                            "fontSize": "1.4em",
                            "color": "#ffffff"
                        },
                        "id": "lpep-label"
                    },
                    {
                        "text": "Cass",
                        "point": {
                            "x": 1987,
                            "xAxis": 0,
                            "y": 2.6,
                            "yAxis": 0
                        },
                        "style": {
                            "fontSize": "1.5em",
                            "color": "#ffffff"
                        },
                        "id": "cassettes-label"
                    },
                    {
                        "text": "CD",
                        "point": {
                            "x": 1999,
                            "xAxis": 0,
                            "y": 6,
                            "yAxis": 0
                        },
                        "style": {
                            "fontSize": "4em",
                            "color": "#ffffff"
                        },
                        "id": "cd-label"
                    },
                    {
                        "text": "DL",
                        "point": {
                            "x": 2011,
                            "xAxis": 0,
                            "y": 4,
                            "yAxis": 0
                        },
                        "style": {
                            "fontSize": "1.2em",
                            "color": "#ffffff"
                        },
                        "id": "dl-label"
                    },
                    {
                        "text": "Strm",
                        "point": {
                            "x": 2018,
                            "xAxis": 0,
                            "y": 5,
                            "yAxis": 0
                        },
                        "style": {
                            "fontSize": "1.5em",
                            "color": "#ffffff"
                        },
                        "id": "streams-label"
                    }
                ]
            }
        ],
        "responsive": {
            "rules": [
                {
                    "condition": {
                        "maxWidth": 500
                    },
                    "chartOptions": {
                        "title": {
                            "align": "left"
                        },
                        "subtitle": {
                            "y": -150,
                            "x": -20
                        },
                        "yAxis": {
                            "labels": {
                                "align": "left",
                                "x": 0,
                                "y": -3
                            },
                            "tickLength": 0,
                            "title": {
                                "align": "high",
                                "reserveSpace": false,
                                "rotation": 0,
                                "textAlign": "left",
                                "y": -20
                            }
                        }
                    }
                }
            ]
        }
    },
    "visualization_explanation": "The provided Highcharts configuration is designed to render a stacked area chart that visualizes the revenue trends of various music formats over the years from 1973 to 2021. The chart includes a title and a dynamic subtitle that updates based on the selected year. The data is loaded from a CSV file, and the chart is configured to handle large datasets efficiently. The x-axis represents the years, while the y-axis represents the revenue in billions. The chart includes custom annotations to highlight significant points in the data, such as the rise and fall of different music formats. The chart also includes responsive design rules to ensure it looks good on different screen sizes. The chart is interactive, allowing users to play and pause the animation of the data over time using a slider control."
}