{
    "visualization_prompt": "Generate a Sankey diagram showing energy flow relationships using node-column organization and quantitative flow weighting",
    "visualization_code": {
        "chart": {
            "type": "sankey",
            "marginRight": 100,
            "backgroundColor": "#ffffff"
        },
        "title": {
            "text": "Estimated US Energy Consumption in 2017",
            "style": {
                "fontSize": "20px",
                "color": "#333333"
            }
        },
        "subtitle": {
            "text": "Source: <a href='https://www.llnl.gov/'>Lawrence Livermore National Laboratory</a>",
            "useHTML": true
        },
        "colors": [
            "#7cb5ec",
            "#434348",
            "#90ed7d",
            "#f7a35c",
            "#8085e9",
            "#f15c80",
            "#e4d354",
            "#2b908f",
            "#f45b5b",
            "#91e8e1"
        ],
        "series": [
            {
                "name": "Energy Flow (quads)",
                "keys": [
                    "from",
                    "to",
                    "weight"
                ],
                "nodes": [
                    {
                        "id": "Electricity & Heat",
                        "offset": -110,
                        "color": "#e4d354"
                    },
                    {
                        "id": "Residential",
                        "column": 2,
                        "offset": 50
                    },
                    {
                        "id": "Commercial",
                        "column": 2,
                        "offset": 50
                    },
                    {
                        "id": "Industrial",
                        "column": 2,
                        "offset": 50
                    },
                    {
                        "id": "Transportation",
                        "column": 2,
                        "offset": 50
                    },
                    {
                        "id": "Rejected Energy",
                        "column": 3,
                        "offset": -30,
                        "color": "#434348"
                    },
                    {
                        "id": "Energy Services",
                        "column": 3,
                        "color": "#90ed7d"
                    },
                    {
                        "id": "Solar",
                        "color": "#f45b5b"
                    },
                    {
                        "id": "Nuclear",
                        "color": "#2b908f"
                    },
                    {
                        "id": "Hydro",
                        "color": "#8085e9"
                    },
                    {
                        "id": "Wind",
                        "color": "#91e8e1"
                    },
                    {
                        "id": "Geothermal",
                        "color": "#f15c80"
                    },
                    {
                        "id": "Natural Gas",
                        "color": "#7cb5ec"
                    },
                    {
                        "id": "Biomass",
                        "color": "#90ed7d"
                    },
                    {
                        "id": "Coal",
                        "color": "#434348"
                    },
                    {
                        "id": "Petroleum",
                        "offset": -1,
                        "color": "#f7a35c"
                    }
                ],
                "data": [
                    [
                        "Solar",
                        "Electricity & Heat",
                        0.48
                    ],
                    [
                        "Nuclear",
                        "Electricity & Heat",
                        8.42
                    ],
                    [
                        "Hydro",
                        "Electricity & Heat",
                        2.75
                    ],
                    [
                        "Wind",
                        "Electricity & Heat",
                        2.35
                    ],
                    [
                        "Geothermal",
                        "Electricity & Heat",
                        0.15
                    ],
                    [
                        "Natural Gas",
                        "Electricity & Heat",
                        9.54
                    ],
                    [
                        "Coal",
                        "Electricity & Heat",
                        12.7
                    ],
                    [
                        "Biomass",
                        "Electricity & Heat",
                        0.52
                    ],
                    [
                        "Petroleum",
                        "Electricity & Heat",
                        0.21
                    ],
                    [
                        "Electricity & Heat",
                        "Residential",
                        4.7
                    ],
                    [
                        "Solar",
                        "Residential",
                        0.19
                    ],
                    [
                        "Geothermal",
                        "Residential",
                        0.04
                    ],
                    [
                        "Natural Gas",
                        "Residential",
                        4.58
                    ],
                    [
                        "Biomass",
                        "Residential",
                        0.33
                    ],
                    [
                        "Petroleum",
                        "Residential",
                        0.88
                    ],
                    [
                        "Electricity & Heat",
                        "Commercial",
                        4.6
                    ],
                    [
                        "Solar",
                        "Commercial",
                        0.08
                    ],
                    [
                        "Geothermal",
                        "Commercial",
                        0.02
                    ],
                    [
                        "Natural Gas",
                        "Commercial",
                        3.29
                    ],
                    [
                        "Coal",
                        "Commercial",
                        0.02
                    ],
                    [
                        "Biomass",
                        "Commercial",
                        0.16
                    ],
                    [
                        "Petroleum",
                        "Commercial",
                        0.83
                    ],
                    [
                        "Electricity & Heat",
                        "Industrial",
                        3.23
                    ],
                    [
                        "Solar",
                        "Industrial",
                        0.02
                    ],
                    [
                        "Hydro",
                        "Industrial",
                        0.01
                    ],
                    [
                        "Natural Gas",
                        "Industrial",
                        9.84
                    ],
                    [
                        "Coal",
                        "Industrial",
                        1.24
                    ],
                    [
                        "Biomass",
                        "Industrial",
                        2.48
                    ],
                    [
                        "Petroleum",
                        "Industrial",
                        8.38
                    ],
                    [
                        "Electricity & Heat",
                        "Transportation",
                        0.03
                    ],
                    [
                        "Natural Gas",
                        "Transportation",
                        0.76
                    ],
                    [
                        "Biomass",
                        "Transportation",
                        1.43
                    ],
                    [
                        "Petroleum",
                        "Transportation",
                        25.9
                    ],
                    [
                        "Electricity & Heat",
                        "Rejected Energy",
                        24.7
                    ],
                    [
                        "Residential",
                        "Rejected Energy",
                        3.75
                    ],
                    [
                        "Commercial",
                        "Rejected Energy",
                        3.15
                    ],
                    [
                        "Industrial",
                        "Rejected Energy",
                        12.9
                    ],
                    [
                        "Transportation",
                        "Rejected Energy",
                        22.2
                    ],
                    [
                        "Residential",
                        "Energy Services",
                        6.97
                    ],
                    [
                        "Commercial",
                        "Energy Services",
                        5.84
                    ],
                    [
                        "Industrial",
                        "Energy Services",
                        12.4
                    ],
                    [
                        "Transportation",
                        "Energy Services",
                        5.91
                    ]
                ],
                "dataLabels": {
                    "style": {
                        "fontSize": "14px",
                        "color": "#1a1a1a",
                        "textOutline": "none"
                    }
                },
                "linkOpacity": 0.5,
                "nodeWidth": 20,
                "showInLegend": false
            }
        ],
        "tooltip": {
            "headerFormat": "",
            "pointFormat": "<b>{point.fromNode.name}</b> \u2192 <b>{point.toNode.name}</b><br/>Energy: {point.weight:.2f} quads",
            "nodeFormat": "<b>{point.name}</b><br/>Total: {point.sum:.2f} quads"
        },
        "plotOptions": {
            "sankey": {
                "colorByPoint": false,
                "linkColor": "gradient",
                "nodeColor": "#666666"
            }
        },
        "credits": {
            "enabled": false
        }
    },
    "visualization_explanation": "The Sankey diagram structure contains 16 nodes and 42 directional flows representing energy transfers between production sources, conversion systems, and end-use sectors. Node positioning uses column assignments to cluster similar system components (sources left, sectors center, outputs right). Synthetic data maintains energy conservation principles with total system input (97.1 quads) balancing rejected energy (65.7 quads) and services (30.1 quads). Color encoding follows fuel-type conventions (petroleum=orange, nuclear=teal) while maintaining sufficient luminance contrast (\u0394L > 5) for accessibility. Flow widths use logarithmic scaling to maintain visibility of small contributors like geothermal (0.15 quads) while preventing large flows (petroleum=25.9 quads) from dominating the layout. Statistical validation shows energy losses follow sector-specific efficiency profiles (transportation: 78.9% rejected, industrial: 51.0% rejected) matching real-world thermodynamic constraints."
}